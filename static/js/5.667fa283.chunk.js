(this.webpackJsonpchatboat=this.webpackJsonpchatboat||[]).push([[5],{27:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(19),c=a(16),l=a(24),s=a.n(l),i=a(4),r=a(26),o=a(17),m=a(18),u=a(20),h=a(21),p=a(0),d=a.n(p),b=(a(27),function(e){var t=e.icon,a=e.chat_id,n=e.chat_label,l=e.chat_desc,s=e.chat_options,i=e.type,r=e.reply_id,o=(e.timestamp,e.replay),m=e.setContactUs,u={chat_id:a,chat_label:n,chat_desc:l,chat_options:s,type:i,reply_id:r};return d.a.createElement("li",{className:"list-group-item ".concat(i)},t&&"a"!==i&&d.a.createElement("img",{className:"chat-icon",src:t,alt:"chat icon"}),d.a.createElement("div",{className:"msg",onClick:function(e){e.stopPropagation(),"a"!==i&&"i"!==i&&o(u)}},"c"!==i&&n&&d.a.createElement("div",null,n),"c"!==i&&l&&d.a.createElement("div",null,l),"c"===i&&d.a.createElement("div",null,function(e,t){var a=Object(c.a)({},e).chat_desc,n=[],l="",s="",i=a.indexOf("[");if(i>-1){var r=a.indexOf("]");n=a.substring(i+1,r).split(","),l=a.substring(0,i),s=a.substring(r+1)}else l=a;return d.a.createElement(d.a.Fragment,null,d.a.createElement("span",null,l),d.a.createElement("a",{href:n[1],target:n[2]},n[0]),d.a.createElement("span",null,s),n&&n.length?d.a.createElement(d.a.Fragment,null,d.a.createElement("br",null),d.a.createElement("br",null)):null,d.a.createElement("span",null,"Click ",d.a.createElement("span",{className:"text-primary",onClick:function(a){a.stopPropagation(),t(e)}},"here")," to contact us"))}(u,m)),s&&s.length?d.a.createElement("ul",{className:"list-group my-2"},s.map((function(e,t){return d.a.createElement("li",{className:"list-group-item",key:"opt_"+t,onClick:function(t){t.stopPropagation(),o(e)}},e.chat_label||e.chat_desc)}))):null))}),g=function(e){var t=e.chatList,a=e.replay,n=e.setContactUs,c=e.style,l=e.icon;return d.a.createElement("ul",{className:"list-group chatList",style:c},t&&t.length?t.map((function(e){return d.a.createElement(b,Object.assign({},e,{key:"chat_id_"+e.chat_id+"_"+Math.random()*Date.now(),replay:a,icon:l,setContactUs:n}))})):null)},f=a(28),E=function(e){var t=e.contactUs,a=e.handleSubmit,n=e.handleOnChange,l=e.setContactUs,s=e.message,i=e.email,r=e.copyMe,o=e.attachment,m=Object(p.useRef)();return t&&t.chat_id?d.a.createElement("form",{className:"chatFooter",onSubmit:a},d.a.createElement("div",{className:"contactUsForChat"},d.a.createElement("div",{className:"w-100"},t.email&&d.a.createElement(d.a.Fragment,null,d.a.createElement("p",{className:"m-0 email mb-2"},d.a.createElement("button",{className:"btn btn-link text-dark",type:"button",onClick:function(){var e=Object(c.a)({},t);delete e.email,l(e)}},d.a.createElement(f.d,null)),d.a.createElement("small",null,"From: ",t.email)),d.a.createElement("div",{className:"form-check ml-2"},d.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"copyMe",name:"copyMe",value:r,onChange:n}),d.a.createElement("label",{htmlFor:"copyMe",className:"form-check-label"},"Copy Me"))),o&&d.a.createElement("p",{className:"m-0 email mb-2"},d.a.createElement("button",{className:"btn btn-link text-dark",type:"button",onClick:function(){return l(null)}},d.a.createElement(f.d,null)),d.a.createElement("small",null,"Attachment: ",o&&o.name)),d.a.createElement("p",{className:"my-2 mx-0 subject"},"Subject: ",t.chat_label)),d.a.createElement("button",{className:"btn btn-outline-dark",type:"button",onClick:function(){return l(null)}},d.a.createElement(f.c,null))),d.a.createElement("div",null,d.a.createElement("input",{type:"file",name:"attachment",className:"d-none",ref:m,onChange:n,accept:"image/*"}),d.a.createElement("button",{className:"btn btn-link text-dark addAttachmentBtn",type:"button",onClick:function(){m.current.click()}},d.a.createElement(f.b,null))),d.a.createElement("div",{className:"input-group"},t.email?d.a.createElement("input",{type:"text",className:"form-control",placeholder:"Write something here..",name:"message",value:s,onChange:n}):d.a.createElement("input",{type:"email",className:"form-control",placeholder:"Enter your email",name:"email",value:i,onChange:n}),d.a.createElement("div",{className:"input-group-append"},d.a.createElement("button",{className:"btn btn-link text-dark addAttachmentBtn",type:"submit"},d.a.createElement(f.a,null))))):null},y=function(e){var t=e.copyMe,a=e.chatHeadIcon,n=e.chatHeadTitle,c=e.toggleChatBody,l=e.message,s=e.email,i=e.handleOnChange,r=e.chatList,o=e.replay,m=e.contactUs,u=e.setContactUs,h=e.handleSubmit,p=e.attachment;return d.a.createElement("div",{className:"chatBody"},d.a.createElement("header",{className:"chatHeader"},d.a.createElement("span",{className:"title"},d.a.createElement("img",{src:a,className:"img-fluid mr-2",alt:"Chat Head"}),n&&d.a.createElement("span",null,n)),d.a.createElement("button",{className:"btn btn-outline-light close-btn",onClick:function(){return c(!1)}},"\xd7")),d.a.createElement(g,{style:{height:m&&m.chat_id?"calc(100% - 8rem)":"calc(100% - 4rem)"},chatList:r,replay:o,icon:a,setContactUs:u}),d.a.createElement(E,{attachment:p,message:l,email:s,copyMe:t,contactUs:m,setContactUs:u,handleSubmit:h,handleOnChange:i}))},v=a(5),C=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var c=e.chatList,l=e.jsonpath;return n.state={toggleChat:!1,chatList:c||[],questions:[],jsonPath:l,contactUs:null,email:"",message:"",attachment:null,copyMe:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.jsonpath){e.next=15;break}return e.prev=2,e.next=5,fetch(this.state.jsonPath);case 5:return e.next=7,e.sent.json();case 7:t=e.sent,console.log(t),t&&t.length&&(a=t.filter((function(e){return 0===e.chat_id}))).length&&this.setState({questions:t,chatList:[].concat(Object(i.a)(this.state.chatList),Object(i.a)(a))}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"toggleChatBody",value:function(e){this.setState({toggleChat:e})}},{key:"replay",value:function(e){var t=this,a=e.reply_id;if(console.log(a),a){var n=this.state,c=n.questions,l=n.chatList,s=c.filter((function(e){return e.chat_id===a}));this.setState({chatList:[].concat(Object(i.a)(l),[e])},(function(){s.length&&t.setState({chatList:[].concat(Object(i.a)(t.state.chatList),Object(i.a)(s))})}))}}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.chatList,a=e.questions,n=document.querySelector(".chatList > .list-group-item:last-child");if(n&&n.scrollIntoView({behavior:"smooth"}),1===t.length&&t[0].reply_id){var c=a.filter((function(e){return e.chat_id===t[0].reply_id}));c.length&&this.setState({chatList:[].concat(Object(i.a)(t),Object(i.a)(c))})}}},{key:"setContactUs",value:function(e){this.setState({contactUs:e})}},{key:"isValidEmail",value:function(e){return/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/.test(e)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.showToast,a=this.state,n=a.contactUs,l=a.email,s=a.message;if(this.isValidEmail(l)){if(n.email){var i=Object(c.a)({},n);i.message=s,this.setState({contactUs:i})}else{var r=Object(c.a)({},n);r.email=l,this.setState({contactUs:r})}this.isValidEmail(l)&&s&&this.submitForm()}else t("Please provide valid email",1e4)}},{key:"submitForm",value:function(){var e=this.props,t=e.clientname,a=e.clientemail,n=e.page_flag,c=this.state,l=c.email,s=c.message,i=c.attachment,r=c.copyMe,o=c.contactUs,m={send_mail:"1",grcaptcha:null,page_flag:n,data:{full_name:t,state:null,city:null,subject:"".concat(o.chat_label||o.chat_desc),message:s,email_id:(r?l+",":"")+a,send_email_id:a,designation:null,organisation:null,mobile:null,telephone:null,dob:null,gender:null,address:null,checked_user:r,attachments:o.attachmentPath,user_email:l}};console.log(i,m)}},{key:"handleOnChange",value:function(e){var t=e.target,a=t.name;"attachment"===a?this.setState(Object(n.a)({},a,t.files[0])):this.setState(Object(n.a)({},a,t.value))}},{key:"render",value:function(){var e=this,t=this.state,a=t.toggleChat,n=t.chatList,c=t.contactUs,l=t.email,s=t.message,i=t.attachment,r=t.copyMe,o=this.props,m=o.icon,u=o.msg,h=o.title,p=o.currentTab;return d.a.createElement(v.a,{value:[]},d.a.createElement("div",{className:"ChatBoat ".concat("style"===p?"style col-12 col-md-9 col-sm-8":"")},d.a.createElement("button",{className:"btn btn-light chatHead",onClick:function(){return e.toggleChatBody(!a)}},d.a.createElement("img",{src:m,className:"img-fluid",alt:"Chat Head"}),u&&d.a.createElement("span",null,u)),(a||"style"===p)&&d.a.createElement(y,{currentTab:p,handleSubmit:function(t){return e.handleSubmit(t)},email:l,copyMe:r,attachment:i,message:s,contactUs:c,setContactUs:function(t){return e.setContactUs(t)},replay:function(t){return e.replay(t)},chatList:n,chatHeadTitle:h,chatHeadIcon:m,toggleChatBody:function(t){return e.toggleChatBody(t)},handleOnChange:function(t){return e.handleOnChange(t)}})))}}]),a}(d.a.Component),k=Object(v.b)(C);t.default=function(e){return d.a.createElement(v.a,{value:[]},d.a.createElement(k,e))}}}]);