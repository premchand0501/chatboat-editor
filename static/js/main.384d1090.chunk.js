(this.webpackJsonpchatboat=this.webpackJsonpchatboat||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o);a(18),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(1),i=a(6),s=a(7),u=a(9),h=a(10),m=a(8),d=a(3),p=a(2),f=function(e){var t=e.questions,a=e.currentQuestion,o=e.handleSubmit,c=e.handleOnChange,l=e.handleAddEditChatOption,i=e.clearForm,s=e.deleteOption,u=Object(n.useState)(-1),h=Object(p.a)(u,2),m=h[0],d=h[1],f=function(e,t){e.stopPropagation(),m===t?(d(-1),s(t)):d(t)};return r.a.createElement("form",{onSubmit:function(e){return o(e,!1)}},r.a.createElement("h3",null,"Enter your chat details"),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text"},"Chat ID#")),r.a.createElement("input",{type:"text",className:"form-control",value:a.chat_id,onChange:function(e){return c(e,!1)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatLabel"},"Chat Label"),r.a.createElement("textarea",{type:"text",className:"form-control",id:"chatLabel",name:"chat_label",value:a.chat_label,rows:"3",onChange:function(e){return c(e,!1)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatDesc"},"Chat Description"),r.a.createElement("textarea",{type:"text",className:"form-control",id:"chatDesc",name:"chat_desc",rows:"4",value:a.chat_desc,onChange:function(e){return c(e,!1)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatType"},"Chat Type"),r.a.createElement("select",{className:"form-control",id:"chatType",name:"type",value:a.type,onChange:function(e){return c(e,!1)}},r.a.createElement("option",{value:""},"Select Type"),r.a.createElement("option",{value:"q"},"Question"),r.a.createElement("option",{value:"ol"},"Options List"),r.a.createElement("option",{value:"a"},"Answer"),r.a.createElement("option",{value:"c"},"Contact us"),r.a.createElement("option",{value:"i"},"Info Message"))),r.a.createElement("div",{className:"form-group mb3"},r.a.createElement("label",{htmlFor:"replayId"},"Chat Options"),r.a.createElement("button",{type:"button",className:"btn btn-outline-info mb-1 w-100",onClick:function(){return l(a)}},"+ Add Chat Options"),a.chat_options.map((function(e,t){return r.a.createElement("button",{type:"button",className:"btn btn-outline-dark mb-1 w-100",key:"ol_ques_"+t,onClick:function(){return l(e)}},e.chat_label&&r.a.createElement("p",{className:"m-0"},e.chat_label),e.chat_desc&&r.a.createElement("p",{className:"m-0"},r.a.createElement("small",null,e.chat_desc)),r.a.createElement("span",{className:"btn ".concat(m===e.chat_id?"btn-danger":"btn-outline-danger"," btn-sm"),onClick:function(t){return f(t,e.chat_id)}},m===e.chat_id?"Confirm Delete":"Delete"),m===e.chat_id&&r.a.createElement("span",{className:"btn btn-link btn-sm text-warning",onClick:function(e){return f(e,-1)}},"Cancel"))}))),"ol"!==a.type?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"replayId"},"Chat Replay"),r.a.createElement("select",{className:"form-control",id:"replayId",name:"reply_id",onChange:function(e){return c(e,!1)},value:a.reply_id},r.a.createElement("option",{value:null,disabled:!0},"Select Chat Replay"),r.a.createElement("option",{value:""},"No Reply"),t.map((function(e,t){return r.a.createElement("option",{key:"opt_"+t,value:e.chat_id,disabled:e.reply_id===a.chat_id},"#"+e.chat_id," : ",e.chat_label||e.chat_desc)})))):null,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement("button",{type:"button",className:"ml-3 btn btn-outline-primary",onClick:i},"Clear Form"))},b=function(e){var t=e.questions,a=e.chatOptionsQuestion,n=e.handleSubmit,o=e.handleOnChange,c=e.currentQuestion,l=e.handleBack;return r.a.createElement("form",{onSubmit:function(e){return n(e,!0)}},r.a.createElement("div",{className:"action-bar d-flex align-items-center mb-3"},r.a.createElement("button",{type:"button",className:"btn btn-outline-dark",onClick:l},"Back"),r.a.createElement("h5",{className:"m-0 ml-2"},"Adding Chat options for Chat ID# ",c.chat_id)),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text"},"Chat ID#")),r.a.createElement("input",{type:"text",className:"form-control",value:a.chat_id,onChange:function(e){return o(e,!0)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatLabel"},"Chat Label"),r.a.createElement("textarea",{type:"text",className:"form-control",id:"chatLabel",name:"chat_label",value:a.chat_label,rows:"3",onChange:function(e){return o(e,!0)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatDesc"},"Chat Description"),r.a.createElement("textarea",{type:"text",className:"form-control",id:"chatDesc",name:"chat_desc",rows:"4",value:a.chat_desc,onChange:function(e){return o(e,!0)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatType"},"Chat Type"),r.a.createElement("select",{className:"form-control",id:"chatType",name:"type",value:a.type,onChange:function(e){return o(e,!0)}},r.a.createElement("option",{value:""},"Select Type"),r.a.createElement("option",{value:"q"},"Question"),r.a.createElement("option",{value:"a"},"Answer"),r.a.createElement("option",{value:"c"},"Contact us"),r.a.createElement("option",{value:"i"},"Info Message"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"replayId"},"Chat Replay"),r.a.createElement("select",{className:"form-control",id:"replayId",name:"reply_id",onChange:function(e){return o(e,!0)},value:a.reply_id},r.a.createElement("option",{value:null,disabled:!0},"Select Chat Replay"),r.a.createElement("option",{value:""},"No Reply"),t.map((function(e,t){return r.a.createElement("option",{key:"opt_"+t,value:e.chat_id,disabled:e.reply_id===c.chat_id},"#"+e.chat_id," : ",e.chat_label||e.chat_desc)})))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))},v=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var r=e.questions,o=e.editQuestion,c={chat_id:r&&r.length||0,chat_label:"",chat_desc:"",chat_options:[],type:"",reply_id:""},l=!1;o&&(c.chat_id=o.chat_id,c.chat_label=o.chat_label,c.chat_desc=o.chat_desc,c.chat_options=o.chat_options,c.type=o.type,c.reply_id=o.reply_id,l=!0);var s=Object(d.a)({},c);return n.state={questions:r||[],currentQuestion:c,chatOptionsQuestion:s,ifEditing:l,errors:{}},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.editQuestion,a=e.questions,n=this.state,r=n.currentQuestion,o=n.questions;t&&r.chat_id!==t.chat_id&&(r.chat_id=t.chat_id,r.chat_label=t.chat_label,r.chat_desc=t.chat_desc,r.chat_options=t.chat_options,r.type=t.type,r.reply_id=t.reply_id||"",this.setState({currentQuestion:r,ifEditing:!0,questions:a}),this.handleBack()),o.length!==a.length&&(r.chat_id=a.length,this.setState({questions:a,currentQuestion:r}))}},{key:"handleOnChange",value:function(e,t){var a=this.state[t?"chatOptionsQuestion":"currentQuestion"];a[e.target.name]=e.target.value,this.setState(Object(m.a)({},t?"chatOptionsQuestion":"currentQuestion",a))}},{key:"handleSubmit",value:function(e,t){var a=this;e.preventDefault();var n=this.state,r=n.chatOptionsQuestion,o=n.currentQuestion;if(t){var c=Object(d.a)({},r);c.reply_id=parseInt(c.reply_id);var i=Object(d.a)({},o);i.reply_id&&(i.reply_id=parseInt(i.reply_id)),i.chat_options.filter((function(e){return e.chat_id===r.chat_id})).length?i.chat_options=i.chat_options.map((function(e){return e.chat_id=parseInt(e.chat_id),e.reply_id=parseInt(e.reply_id),console.log(e.chat_id),e.chat_id===r.chat_id?r:e})):(i.chat_options=[].concat(Object(l.a)(i.chat_options),[c]),i.chat_options.forEach((function(e){e.chat_id=parseInt(e.chat_id),e.reply_id=parseInt(e.reply_id)}))),i.type="ol",i.reply_id="",this.setState({currentQuestion:i},(function(){return a.handleBack()}))}else o.chat_label||o.chat_desc?(this.props.saveQuestions(o),this.clearForm(o)):this.showError("Please add chat label or description")}},{key:"showError",value:function(e){var t=this;this.setState({errors:{0:e}},(function(){setTimeout((function(){t.setState({errors:{}})}),5e3)}))}},{key:"clearForm",value:function(){this.props.saveQuestions(null),this.setState({ifEditing:!1,currentQuestion:{chat_id:this.state.questions.length,chat_label:"",chat_desc:"",chat_options:[],type:"",reply_id:""}})}},{key:"handleAddEditChatOption",value:function(e){if(e){var t=this.state.currentQuestion.chat_options.filter((function(t){return t.chat_id===e.chat_id}));if(t.length)this.setState({chatOptionsQuestion:t[0],ifEditing:!0});else{var a=100*e.chat_id+e.chat_options.length,n=this.state.chatOptionsQuestion;n.chat_id=a,this.setState({chatOptionsQuestion:n,ifEditing:!0})}}}},{key:"handleBack",value:function(){var e=Object(d.a)({},this.state.chatOptionsQuestion);e.chat_desc="",e.chat_id=0,e.chat_label="",e.chat_options=[],e.reply_id="",e.type="",this.setState({chatOptionsQuestion:e,ifEditing:!1})}},{key:"deleteOption",value:function(e){var t=Object(d.a)({},this.state.currentQuestion),a=t.chat_options.filter((function(t){return t.chat_id!==e}));t.chat_options=a,this.setState({currentQuestion:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.currentQuestion,o=t.chatOptionsQuestion,c=t.ifEditing,l=t.errors;return r.a.createElement("div",{className:"sidebar col-12 col-md-3 col-sm-6"},o.chat_id&&c?r.a.createElement(b,{questions:a,currentQuestion:n,chatOptionsQuestion:o,handleOnChange:function(t,a){return e.handleOnChange(t,a)},handleBack:function(){return e.handleBack()},handleSubmit:function(t,a){return e.handleSubmit(t,a)}}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("h3",{htmlFor:"jsonField"},"If you already have json paste here"),r.a.createElement("textarea",{className:"form-control",rows:"4",id:"jsonField",value:this.props.jsonValue,placeholder:"Paste your json here...",onChange:this.props.handleJSONchange})),r.a.createElement("hr",null),r.a.createElement(f,{clearForm:function(){return e.clearForm()},handleAddEditChatOption:function(t){return e.handleAddEditChatOption(t)},deleteOption:function(t){return e.deleteOption},questions:a,currentQuestion:n,handleOnChange:function(t,a){return e.handleOnChange(t,a)},handleSubmit:function(t,a){return e.handleSubmit(t,a)}})),Object.keys(l).length?r.a.createElement("div",{className:"my-3"},r.a.createElement("h5",null,"Errors:"),Object.keys(l).map((function(e){return r.a.createElement("div",{className:"alert alert-danger fade-scale-up",role:"alert",key:"err_"+e},l[e])}))):null)}}]),a}(r.a.Component),y=function(e){var t=e.questions,a=e.setEditQuestion,o=e.downloadJSON,c=e.searchText,l=e.handleSearch,i=e.deleteQuestion,s=Object(n.useState)(-1),u=Object(p.a)(s,2),h=u[0],m=u[1],d=Object(n.useState)(!1),f=Object(p.a)(d,2),b=f[0],v=(f[1],[]);if(c){var y=c.toLowerCase();v=t.filter((function(e){return e.chat_id.toString().toLowerCase().includes(y)||e.chat_label.toLowerCase().includes(y)||e.chat_desc.toLowerCase().includes(y)||e.reply_id&&e.reply_id.toString().toLowerCase().includes(y)}))}else v=t;var E=function(e,t){e.stopPropagation(),h===t?(m(-1),i(t)):m(t)};return r.a.createElement("div",{className:"questions col-12 col-md-9 col-sm-6"},r.a.createElement("div",{className:"action-bar d-flex align-items-center justify-content-between"},r.a.createElement("h5",{className:"m-0 ml-2"},"Chat boat Questions"),r.a.createElement("button",{className:"btn btn-primary",onClick:o},"Download JSON"),r.a.createElement("div",{className:"input-group px-0 mt-3",style:{flexBasis:"100%"}},r.a.createElement("input",{type:"text",className:"form-control",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return l("")}},"Clear")))),b&&r.a.createElement("button",{className:"btn btn-outline-light"},"Top"),r.a.createElement("div",{className:"container-fluid py-3"},r.a.createElement("div",{className:"row"},v&&v.length?v.map((function(e,t){return r.a.createElement("div",{className:"col col-12 col-md-4 col-sm-6 mb-2",key:"ques_"+t},r.a.createElement("div",{className:"card",onClick:function(){return a(e)}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-text d-flex align-items-center justify-content-between"},r.a.createElement("span",null,"Chat ID# ",r.a.createElement("strong",null,e.chat_id)),e.reply_id&&r.a.createElement("span",null,"Reply Id# ",e.reply_id)),r.a.createElement("hr",null),r.a.createElement("h5",{className:"card-title"},e.chat_label),r.a.createElement("p",{className:"card-text"},e.chat_desc),r.a.createElement("button",{className:"btn ".concat(h===e.chat_id?"btn-danger":"btn-outline-danger"," btn-sm"),onClick:function(t){return E(t,e.chat_id)}},h===e.chat_id?"Confirm Delete":"Delete"),h===e.chat_id&&r.a.createElement("button",{className:"btn btn-outline-light' btn-sm",onClick:function(e){return E(e,-1)}},"Cancel"))))})):r.a.createElement("div",{className:"alert alert-info fade-scale-up",role:"alert"},"No questions added yet"))))},E=(a(19),Object(n.createContext)()),_=Object(n.createContext)();function g(e,t){switch(t.type){case"show":return{messages:[].concat(Object(l.a)(e.messages),[t.toast])};case"remove":var a=e.messages,n=a.filter((function(e){return e.timestamp===t.timestamp})),r=a.filter((function(e){return e.timestamp!==t.timestamp}));if(n.length){var o=n[0];clearTimeout(o.timer())}return{messages:Object(l.a)(r)};default:throw new Error("Unhandled action type: ".concat(t.type))}}function N(e){var t=e.children,a=Object(n.useReducer)(g,{messages:[]}),o=Object(p.a)(a,2),c=o[0],l=o[1];return r.a.createElement(E.Provider,{value:c},r.a.createElement(_.Provider,{value:l},t,r.a.createElement(C,null)))}function O(){var e=Object(n.useContext)(_);if(void 0===e)throw new Error("useToastDispatch must be used within a ToastProvider");return e}function C(e){var t=e.children;return r.a.createElement(E.Consumer,null,(function(e){if(void 0===e)throw new Error("ToastConsumer must be used within a ToastProvider");var a=e.messages;return r.a.createElement(_.Consumer,null,(function(e){return r.a.createElement(r.a.Fragment,null,t,a.length?r.a.createElement("div",{className:"toast-wrapper"},a.map((function(t){return r.a.createElement("div",{className:"alert alert-success my-2 px-3 py-2 toast border-0",role:"alert",key:"_"+Math.random()*t.timestamp},t.msg,r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-outline-light my-2 btn-sm",onClick:function(){return e({type:"remove",timestamp:t.timestamp})}},"\xd7"))}))):null)}))}))}a(20);var S,w=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={questions:[],editQuestion:null,jsonValue:"",searchText:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("questions"),t=localStorage.getItem("jsonValue"),a=null;if(e)try{a=JSON.parse(e)}catch(n){console.log(n)}a&&t?this.setState({questions:a,jsonValue:t}):a?this.setState({questions:a}):t&&this.setState({jsonValue:t})}},{key:"setEditQuestion",value:function(e){e&&this.setState({editQuestion:e})}},{key:"handleSaveQuestion",value:function(e){if(e){var t=this.state.questions;e.chat_id=parseInt(e.chat_id),e.reply_id&&(e.reply_id=parseInt(e.reply_id));var a=[];a=t.filter((function(t){return t.chat_id===e.chat_id})).length?t.map((function(t){return t.chat_id===e.chat_id?e:t})):[].concat(Object(l.a)(t),[e]),this.saveQuestions(a)}else this.setState({editQuestion:null})}},{key:"saveQuestions",value:function(e){this.setState({questions:e,editQuestion:null,jsonValue:JSON.stringify(e)}),localStorage.setItem("questions",JSON.stringify(e)),this.showError("Questions updated successfully")}},{key:"showError",value:function(e,t){(0,this.props.showToast)(e,t)}},{key:"downloadJSON",value:function(){!function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("questions.json",JSON.stringify(this.state.questions)),localStorage.setItem("questions",JSON.stringify(this.state.questions))}},{key:"handleJSONchange",value:function(e){var t=this,a=e.target.value;try{var n=JSON.parse(a);if(n&&n.length){n.filter((function(e){return!!(e.hasOwnProperty("chat_id")&&e.hasOwnProperty("chat_label")&&e.hasOwnProperty("chat_options")&&e.hasOwnProperty("type")&&e.hasOwnProperty("reply_id")&&e.hasOwnProperty("chat_desc"))||(t.showError("Following field has missing keys\n"+JSON.stringify(e),2e4),!1)}));localStorage.setItem("jsonValue",a),localStorage.setItem("questions",JSON.stringify(n)),this.setState({jsonValue:a,questions:n})}}catch(r){console.log(r),this.setState({jsonValue:a}),""!==a&&this.showError("Invalid json format")}}},{key:"handleSearch",value:function(e){this.setState({searchText:e})}},{key:"deleteQuestion",value:function(e){var t=this.state.questions.filter((function(t){return t.chat_id!==e}));this.saveQuestions(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.editQuestion,o=t.jsonValue,c=t.searchText;return r.a.createElement("div",{className:"Editor container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement(v,{jsonValue:o,handleJSONchange:function(t){return e.handleJSONchange(t)},questions:a,editQuestion:n,saveQuestions:function(t){return e.handleSaveQuestion(t)}}),r.a.createElement(y,{searchText:c,handleSearch:function(t){return e.handleSearch(t)},downloadJSON:function(){return e.downloadJSON()},questions:a,editQuestion:n,setEditQuestion:function(t){return e.setEditQuestion(t)},deleteQuestion:function(t){return e.deleteQuestion(t)}})))}}]),a}(r.a.Component),Q=(S=w,function(e){var t=function(){var e=O();return function(t,a){if(t){var n=Date.now(),r=function(){return setTimeout((function(){e({type:"remove",timestamp:n})}),a||5e3)};e({type:"show",toast:{msg:t,timer:function(){return r()},timestamp:n}}),r()}}}();return r.a.createElement(S,Object.assign({},e,{showToast:t}))});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null,r.a.createElement(Q,null))),document.getElementById("ChatBoatEditor")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);