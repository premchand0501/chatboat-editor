(this.webpackJsonpchatboat=this.webpackJsonpchatboat||[]).push([[0],{13:function(e,t,a){e.exports=a(20)},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),s=a.n(o),l=(a(18),a(9)),i=a(4),c=a(5),u=a(7),h=a(8),m=(a(19),a(6)),d=a(2),p=function(e){var t=e.questions,a=e.currentQuestion,n=e.handleSubmit,o=e.handleOnChange,s=e.handleAddEditChatOption,l=e.clearForm;return r.a.createElement("form",{onSubmit:function(e){return n(e,!1)}},r.a.createElement("h3",null,"Enter your chat details"),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text"},"Chat ID#")),r.a.createElement("input",{type:"text",className:"form-control",value:a.chat_id,onChange:function(e){return o(e,!1)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatLabel"},"Chat Label"),r.a.createElement("textarea",{type:"text",className:"form-control",id:"chatLabel",name:"chat_label",value:a.chat_label,rows:"3",onChange:function(e){return o(e,!1)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatDesc"},"Chat Description"),r.a.createElement("textarea",{type:"text",className:"form-control",id:"chatDesc",name:"chat_desc",rows:"4",value:a.chat_desc,onChange:function(e){return o(e,!1)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatType"},"Chat Type"),r.a.createElement("select",{className:"form-control",id:"chatType",name:"type",value:a.type,onChange:function(e){return o(e,!1)}},r.a.createElement("option",{value:""},"Select Type"),r.a.createElement("option",{value:"q"},"Question"),r.a.createElement("option",{value:"ol"},"Options List"),r.a.createElement("option",{value:"a"},"Answer"),r.a.createElement("option",{value:"c"},"Contact us"),r.a.createElement("option",{value:"i"},"Info Message"))),r.a.createElement("div",{className:"form-group mb3"},r.a.createElement("label",{htmlFor:"replayId"},"Chat Options"),r.a.createElement("button",{type:"button",className:"btn btn-outline-info mb-1 w-100",onClick:function(){return s(a)}},"+ Add Chat Options"),a.chat_options.map((function(e,t){return r.a.createElement("button",{type:"button",className:"btn btn-outline-dark mb-1 w-100",key:"ol_ques_"+t,onClick:function(){return s(e)}},e.chat_label&&r.a.createElement("p",{className:"m-0"},e.chat_label),e.chat_desc&&r.a.createElement("p",{className:"m-0"},r.a.createElement("small",null,e.chat_desc)))}))),"ol"!==a.type?r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"replayId"},"Chat Replay"),r.a.createElement("select",{className:"form-control",id:"replayId",name:"reply_id",onChange:function(e){return o(e,!1)},value:a.reply_id},r.a.createElement("option",{value:null,disabled:!0},"Select Chat Replay"),r.a.createElement("option",{value:""},"No Reply"),t.map((function(e,t){return r.a.createElement("option",{key:"opt_"+t,value:e.chat_id,disabled:e.reply_id===a.chat_id},"#"+e.chat_id," : ",e.chat_label||e.chat_desc)})))):null,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement("button",{type:"button",className:"ml-3 btn btn-outline-primary",onClick:l},"Clear Form"))},f=function(e){var t=e.questions,a=e.chatOptionsQuestion,n=e.handleSubmit,o=e.handleOnChange,s=e.currentQuestion,l=e.handleBack;return r.a.createElement("form",{onSubmit:function(e){return n(e,!0)}},r.a.createElement("div",{className:"action-bar d-flex align-items-center mb-3"},r.a.createElement("button",{type:"button",className:"btn btn-outline-dark",onClick:l},"Back"),r.a.createElement("h5",{className:"m-0 ml-2"},"Adding Chat options for Chat ID# ",s.chat_id)),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("label",{className:"input-group-text"},"Chat ID#")),r.a.createElement("input",{type:"text",className:"form-control",value:a.chat_id,onChange:function(e){return o(e,!0)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatLabel"},"Chat Label"),r.a.createElement("textarea",{type:"text",className:"form-control",id:"chatLabel",name:"chat_label",value:a.chat_label,rows:"3",onChange:function(e){return o(e,!0)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatDesc"},"Chat Description"),r.a.createElement("textarea",{type:"text",className:"form-control",id:"chatDesc",name:"chat_desc",rows:"4",value:a.chat_desc,onChange:function(e){return o(e,!0)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"chatType"},"Chat Type"),r.a.createElement("select",{className:"form-control",id:"chatType",name:"type",value:a.type,onChange:function(e){return o(e,!0)}},r.a.createElement("option",{value:""},"Select Type"),r.a.createElement("option",{value:"q"},"Question"),r.a.createElement("option",{value:"a"},"Answer"),r.a.createElement("option",{value:"c"},"Contact us"),r.a.createElement("option",{value:"i"},"Info Message"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"replayId"},"Chat Replay"),r.a.createElement("select",{className:"form-control",id:"replayId",name:"reply_id",onChange:function(e){return o(e,!0)},value:a.reply_id},r.a.createElement("option",{value:null,disabled:!0},"Select Chat Replay"),r.a.createElement("option",{value:""},"No Reply"),t.map((function(e,t){return r.a.createElement("option",{key:"opt_"+t,value:e.chat_id,disabled:e.reply_id===s.chat_id},"#"+e.chat_id," : ",e.chat_label||e.chat_desc)})))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))},b=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var r=e.questions,o=e.editQuestion,s={chat_id:r&&r.length||0,chat_label:"",chat_desc:"",chat_options:[],type:"",reply_id:""},l=!1;o&&(s.chat_id=o.chat_id,s.chat_label=o.chat_label,s.chat_desc=o.chat_desc,s.chat_options=o.chat_options,s.type=o.type,s.reply_id=o.reply_id,l=!0);var c=Object(d.a)({},s);return n.state={questions:r||[],currentQuestion:s,chatOptionsQuestion:c,ifEditing:l,errors:{}},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.editQuestion,a=e.questions,n=this.state,r=n.currentQuestion,o=n.questions;t&&r.chat_id!==t.chat_id&&(r.chat_id=t.chat_id,r.chat_label=t.chat_label,r.chat_desc=t.chat_desc,r.chat_options=t.chat_options,r.type=t.type,r.reply_id=t.reply_id||"",this.setState({currentQuestion:r,ifEditing:!0}),this.handleBack()),o.length!==a.length&&(r.chat_id=a.length,this.setState({questions:a,currentQuestion:r}))}},{key:"handleOnChange",value:function(e,t){var a=this.state[t?"chatOptionsQuestion":"currentQuestion"];a[e.target.name]=e.target.value,this.setState(Object(m.a)({},t?"chatOptionsQuestion":"currentQuestion",a))}},{key:"handleSubmit",value:function(e,t){var a=this;e.preventDefault(),console.log("handlesubmit");var n=this.state,r=n.chatOptionsQuestion,o=n.currentQuestion;if(t){var s=Object(d.a)({},r);s.reply_id=parseInt(s.reply_id);var l=Object(d.a)({},o),i=l.chat_options;i.push(s),l.chat_options=i,l.type="ol",l.reply_id="",this.setState({currentQuestion:l},(function(){return a.handleBack()}))}else o.chat_label||o.chat_desc?this.props.saveQuestions(o):this.showError("Please add chat label or description")}},{key:"showError",value:function(e){var t=this;this.setState({errors:{0:e}},(function(){setTimeout((function(){t.setState({errors:{}})}),5e3)}))}},{key:"clearForm",value:function(){console.log("clearform"),this.props.saveQuestions(null),this.setState({ifEditing:!1,currentQuestion:{chat_id:this.state.questions.length,chat_label:"",chat_desc:"",chat_options:[],type:"",reply_id:""}})}},{key:"handleAddEditChatOption",value:function(e){if(e){var t=this.state.currentQuestion.chat_options.filter((function(t){return t.chat_id===e.chat_id}));if(t.length)this.setState({chatOptionsQuestion:t[0],ifEditing:!0});else{var a=100*e.chat_id+e.chat_options.length,n=this.state.chatOptionsQuestion;n.chat_id=a,this.setState({chatOptionsQuestion:n,ifEditing:!0})}}}},{key:"handleBack",value:function(){var e=Object(d.a)({},this.state.chatOptionsQuestion);e.chat_desc="",e.chat_id=0,e.chat_label="",e.chat_options=[],e.reply_id="",e.type="",this.setState({chatOptionsQuestion:e,ifEditing:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.currentQuestion,o=t.chatOptionsQuestion,s=t.ifEditing,l=t.errors;return r.a.createElement("div",{className:"sidebar col-12 col-md-6 col-sm-6"},o.chat_id&&s?r.a.createElement(f,{questions:a,currentQuestion:n,chatOptionsQuestion:o,handleOnChange:function(t,a){return e.handleOnChange(t,a)},handleBack:this.handleBack.bind(this),handleSubmit:function(t,a){return e.handleSubmit(t,a)}}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("h3",{htmlFor:"jsonField"},"If you already have json paste here"),r.a.createElement("textarea",{className:"form-control",rows:"4",id:"jsonField",value:this.props.jsonValue,placeholder:"Paste your json here...",onChange:this.props.handleJSONchange})),r.a.createElement(p,{clearForm:this.clearForm.bind(this),handleAddEditChatOption:function(t){return e.handleAddEditChatOption(t)},questions:a,currentQuestion:n,handleOnChange:function(t,a){return e.handleOnChange(t,a)},handleSubmit:function(t,a){return e.handleSubmit(t,a)}})),Object.keys(l).length?r.a.createElement("div",{className:"my-3"},r.a.createElement("h5",null,"Errors:"),Object.keys(l).map((function(e){return r.a.createElement("div",{className:"alert alert-danger fade-scale-up",role:"alert",key:"err_"+e},l[e])}))):null)}}]),a}(r.a.Component),v=a(12),y=function(e){var t=e.questions,a=e.setEditQuestion,o=e.downloadJSON,s=e.searchText,l=e.handleSearch,i=e.deleteQuestion,c=Object(n.useState)(-1),u=Object(v.a)(c,2),h=u[0],m=u[1],d=[];if(s){var p=s.toLowerCase();d=t.filter((function(e){return e.chat_id.toString().toLowerCase().includes(p)||e.chat_label.toLowerCase().includes(p)||e.chat_desc.toLowerCase().includes(p)||e.reply_id&&e.reply_id.toString().toLowerCase().includes(p)}))}else d=t;var f=function(e,t){e.stopPropagation(),h===t?(m(-1),i(e,t)):m(t)};return r.a.createElement("div",{className:"questions col-12 col-md-6 col-sm-6"},r.a.createElement("div",{className:"action-bar d-flex align-items-center justify-content-between"},r.a.createElement("h5",{className:"m-0 ml-2"},"Chat boat Questions"),r.a.createElement("button",{className:"btn btn-primary",onClick:o},"Download JSON"),r.a.createElement("div",{className:"input-group px-0 mt-3",style:{flexBasis:"100%"}},r.a.createElement("input",{type:"text",className:"form-control",value:s,onChange:function(e){return l(e.target.value)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return l("")}},"Clear")))),d&&d.length?d.map((function(e,t){return r.a.createElement("div",{className:"card mb-2",key:"ques_"+t,onClick:function(){return a(e)}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",{className:"card-text d-flex align-items-center justify-content-between"},r.a.createElement("span",null,"Chat ID# ",r.a.createElement("strong",null,e.chat_id)),e.reply_id&&r.a.createElement("span",null,"Reply Id# ",e.reply_id)),r.a.createElement("h5",{className:"card-title"},e.chat_label),r.a.createElement("p",{className:"card-text"},e.chat_desc),r.a.createElement("button",{className:"btn ".concat(h===e.chat_id?"btn-danger":"btn-outline-danger"," btn-sm"),onClick:function(t){return f(t,e.chat_id)}},h===e.chat_id?"Confirm Delete":"Delete"),h===e.chat_id&&r.a.createElement("button",{className:"btn btn-outline-light' btn-sm",onClick:function(e){return f(e,-1)}},"Cancel")))})):r.a.createElement("div",{className:"alert alert-info fade-scale-up",role:"alert"},"No questions added yet"))},E=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={questions:[],editQuestion:null,jsonValue:"",errorMsg:[],searchText:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("questions"),t=localStorage.getItem("jsonValue"),a=null;if(e)try{a=JSON.parse(e)}catch(n){console.log(n)}a&&t?this.setState({questions:a,jsonValue:t}):a?this.setState({questions:a}):t&&this.setState({jsonValue:t})}},{key:"setEditQuestion",value:function(e){e&&this.setState({editQuestion:e})}},{key:"handleSaveQuestion",value:function(e){if(e){var t=this.state.questions,a=[];a=t.filter((function(t){return t.chat_id===e.chat_id})).length?t.map((function(t){return t.chat_id===e.chat_id?e:t})):[].concat(Object(l.a)(t),[e]),this.saveQuestions(a)}else this.setState({editQuestion:null})}},{key:"saveQuestions",value:function(e){this.setState({questions:e,editQuestion:null}),localStorage.setItem("questions",JSON.stringify(e)),this.showError("Questions updated successfully")}},{key:"removeErr",value:function(e,t){var a=this.state.errorMsg.filter((function(e){return e.timestamp!==t}));this.setState({errorMsg:Object(l.a)(a)}),clearTimeout(e)}},{key:"showError",value:function(e,t){var a=this,n=this.state.errorMsg,r=Date.now(),o={msg:e,timer:function(){var e=setTimeout((function(){a.removeErr(e,r)}),t||5e3);return e},timestamp:r};this.setState({errorMsg:[].concat(Object(l.a)(n),[o])},(function(){var e=o.timer();console.log("tmr",e)}))}},{key:"downloadJSON",value:function(){!function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("questions.json",JSON.stringify(this.state.questions)),localStorage.setItem("questions",JSON.stringify(this.state.questions))}},{key:"handleJSONchange",value:function(e){var t=this,a=e.target.value;try{var n=JSON.parse(a);if(n&&n.length){var r=n.filter((function(e){return!!(e.hasOwnProperty("chat_id")&&e.hasOwnProperty("chat_label")&&e.hasOwnProperty("chat_options")&&e.hasOwnProperty("type")&&e.hasOwnProperty("reply_id")&&e.hasOwnProperty("chat_desc"))||(t.showError("Following field has missing keys\n"+JSON.stringify(e),2e4),!1)}));console.log(r),localStorage.setItem("jsonValue",a),localStorage.setItem("questions",JSON.stringify(n)),this.setState({jsonValue:a,questions:n})}}catch(o){console.log(o),this.setState({jsonValue:a}),""!==a&&this.showError("Invalid json format")}}},{key:"handleSearch",value:function(e){this.setState({searchText:e})}},{key:"deleteQuestion",value:function(e,t){e.stopPropagation();var a=this.state.questions.filter((function(e){return e.chat_id!==t}));this.saveQuestions(a)}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.editQuestion,o=t.jsonValue,s=t.errorMsg,l=t.searchText;return r.a.createElement("div",{className:"App container-fluid"},s.length>0&&r.a.createElement("div",{className:"toast-wrapper"},s.map((function(t){return r.a.createElement("div",{className:"alert alert-dark my-2 p-3 toast border-0",role:"alert",key:t.msg},t.msg,t.timestamp,r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-outline-light my-2",onClick:function(){return e.removeErr(t.timer(),t.timestamp)}},"Done"))}))),r.a.createElement("div",{className:"row"},r.a.createElement(b,{jsonValue:o,handleJSONchange:this.handleJSONchange.bind(this),questions:a,editQuestion:n,saveQuestions:this.handleSaveQuestion.bind(this)}),r.a.createElement(y,{searchText:l,handleSearch:this.handleSearch.bind(this),downloadJSON:this.downloadJSON.bind(this),questions:a,editQuestion:n,setEditQuestion:this.setEditQuestion.bind(this),deleteQuestion:this.deleteQuestion.bind(this)})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.11f20644.chunk.js.map