(this.webpackJsonpchatboat=this.webpackJsonpchatboat||[]).push([[0],{17:function(e,t,a){e.exports=a(26)},22:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(15),r=a.n(l),s=(a(22),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var o=a(3),u=a(6),m=a(2),h=a(1),d=a(9),p=a.n(d),f=a(16),b=a(10),g=a(11),v=a(12),E=a(13),y=(a(24),function(e){var t=e.icon,a=e.chat_id,n=e.chat_label,l=e.chat_desc,r=e.chat_options,s=e.type,i=e.reply_id,o=(e.timestamp,e.replay),u=e.setContactUs,h={chat_id:a,chat_label:n,chat_desc:l,chat_options:r,type:s,reply_id:i};return c.a.createElement("li",{className:"list-group-item ".concat(s)},t&&"a"!==s&&c.a.createElement("img",{className:"chat-icon",src:t,alt:"chat icon"}),c.a.createElement("div",{className:"msg",onClick:function(e){e.stopPropagation(),"a"!==s&&"i"!==s&&o(h)}},"c"!==s&&n&&c.a.createElement("div",null,n),"c"!==s&&l&&c.a.createElement("div",null,l),"c"===s&&c.a.createElement("div",null,function(e,t){var a=Object(m.a)({},e),n=a.chat_desc,l=a.type,r=n,s=[],i="",o="",u=r.indexOf("[");if(u>-1){var h=r.indexOf("]");s=r.substring(u+1,h).split(","),i=r.substring(0,u),o=r.substring(h+1)}else i=r;return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,i),c.a.createElement("a",{href:s[1],target:s[2],style:{wordBreak:"break-all"}},s[0]),c.a.createElement("span",null,o),s&&s.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("br",null)):null,"c"===l&&c.a.createElement("span",null,"Click ",c.a.createElement("span",{className:"text-primary",onClick:function(a){a.stopPropagation(),t(e)}},"here")," to contact us"))}(h,u)),r&&r.length?c.a.createElement("ul",{className:"list-group my-2"},r.map((function(e,t){return c.a.createElement("li",{className:"list-group-item",key:"opt_"+t,onClick:function(t){t.stopPropagation(),o(e)}},e.chat_label||e.chat_desc)}))):null))}),C=function(e){var t=e.chatList,a=e.replay,n=e.setContactUs,l=e.style,r=e.icon;return c.a.createElement("ul",{className:"list-group chatList",style:l},t&&t.length?t.map((function(e){return c.a.createElement(y,Object.assign({},e,{key:"chat_id_"+e.chat_id+"_"+Math.random()*Date.now(),replay:a,icon:r,setContactUs:n}))})):null)},k=a(5),w=function(e){var t=e.contactUs,a=e.handleSubmit,l=e.handleOnChange,r=e.setContactUs,s=e.message,i=e.email,o=e.copyMe,u=e.attachment,h=Object(n.useRef)();return t&&t.chat_id?c.a.createElement("form",{className:"chatFooter",onSubmit:a},c.a.createElement("div",{className:"contactUsForChat"},c.a.createElement("div",{className:"w-100"},t.email&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"m-0 email mb-2"},c.a.createElement("button",{className:"btn btn-link text-dark",type:"button",onClick:function(){var e=Object(m.a)({},t);delete e.email,r(e)}},c.a.createElement(k.d,null)),c.a.createElement("small",null,"From: ",t.email)),c.a.createElement("div",{className:"form-check ml-2"},c.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"copyMe",name:"copyMe",value:o,onChange:l}),c.a.createElement("label",{htmlFor:"copyMe",className:"form-check-label"},"Copy Me"))),u&&c.a.createElement("p",{className:"m-0 email mb-2"},c.a.createElement("button",{className:"btn btn-link text-dark",type:"button",onClick:function(){return r(null)}},c.a.createElement(k.d,null)),c.a.createElement("small",null,"Attachment: ",u&&u.name)),c.a.createElement("p",{className:"my-2 mx-0 subject"},"Subject: ",t.chat_label)),c.a.createElement("button",{className:"btn btn-outline-dark",type:"button",onClick:function(){return r(null)}},c.a.createElement(k.c,null))),c.a.createElement("div",null,c.a.createElement("input",{type:"file",name:"attachment",className:"d-none",ref:h,onChange:l,accept:"image/*"}),c.a.createElement("button",{className:"btn btn-link text-dark addAttachmentBtn",type:"button",onClick:function(){h.current.click()}},c.a.createElement(k.b,null))),c.a.createElement("div",{className:"input-group"},t.email?c.a.createElement("input",{type:"text",className:"form-control",placeholder:"Write something here..",name:"message",value:s,onChange:l}):c.a.createElement("input",{type:"email",className:"form-control",placeholder:"Enter your email",name:"email",value:i,onChange:l}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-link text-dark addAttachmentBtn",type:"submit"},c.a.createElement(k.a,null))))):null},j=function(e){var t=e.copyMe,a=e.chatHeadIcon,n=e.chatHeadTitle,l=e.toggleChatBody,r=e.message,s=e.email,i=e.handleOnChange,o=e.chatList,u=e.replay,m=e.contactUs,h=e.setContactUs,d=e.handleSubmit,p=e.attachment;return c.a.createElement("div",{className:"chatBody"},c.a.createElement("header",{className:"chatHeader"},c.a.createElement("span",{className:"title"},c.a.createElement("img",{src:a,className:"img-fluid mr-2",alt:"Chat Head"}),n&&c.a.createElement("span",null,n)),c.a.createElement("button",{className:"btn btn-outline-light close-btn",onClick:function(){return l(!1)}},"\xd7")),c.a.createElement(C,{style:{height:m&&m.chat_id?"calc(100% - 8rem)":"calc(100% - 4rem)"},chatList:o,replay:u,icon:a,setContactUs:h}),c.a.createElement(w,{attachment:p,message:r,email:s,copyMe:t,contactUs:m,setContactUs:h,handleSubmit:d,handleOnChange:i}))},O=a(4),N=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(b.a)(this,a),n=t.call(this,e);var c=e.chatList,l=e.jsonpath;return n.state={toggleChat:!1,chatList:c||[],questions:[],jsonPath:l,contactUs:null,email:"",message:"",attachment:null,copyMe:!1},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.jsonpath){e.next=15;break}return e.prev=2,e.next=5,fetch(this.state.jsonPath);case 5:return e.next=7,e.sent.json();case 7:t=e.sent,console.log(t),t&&this.initChat(t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"initChat",value:function(e){var t=this;if(e.length){var a=e.filter((function(e){return 0===e.chat_id}));a.length&&(this.setState({questions:e,chatList:Object(h.a)(a)}),setTimeout((function(){if(a[0].reply_id){var n=e.filter((function(e){return e.chat_id===a[0].reply_id}));n.length&&t.setState({chatList:[].concat(Object(h.a)(t.state.chatList),Object(h.a)(n))})}}),300))}}},{key:"toggleChatBody",value:function(e){this.setState({toggleChat:e}),e&&this.initChat(this.props.chatList)}},{key:"replay",value:function(e){var t=this,a=e.reply_id;if(a){var n=this.state,c=n.questions,l=n.chatList,r=c.filter((function(e){return e.chat_id===a}));this.setState({chatList:[].concat(Object(h.a)(l),[e])},(function(){r.length&&t.setState({chatList:[].concat(Object(h.a)(t.state.chatList),Object(h.a)(r))},(function(){var e=document.querySelector(".chatList > .list-group-item:last-child");e&&e.scrollIntoView({behavior:"smooth"})}))}))}}},{key:"setContactUs",value:function(e){this.setState({contactUs:e})}},{key:"isValidEmail",value:function(e){return/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_\-.]+)\.([a-zA-Z]{2,5})$/.test(e)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.showToast,a=this.state,n=a.contactUs,c=a.email,l=a.message;if(this.isValidEmail(c)){if(n.email){var r=Object(m.a)({},n);r.message=l,this.setState({contactUs:r})}else{var s=Object(m.a)({},n);s.email=c,this.setState({contactUs:s})}this.isValidEmail(c)&&l&&this.submitForm()}else t("Please provide valid email",1e4)}},{key:"submitForm",value:function(){var e=this.props,t=e.clientname,a=e.clientemail,n=e.page_flag,c=this.state,l=c.email,r=c.message,s=c.attachment,i=c.copyMe,o=c.contactUs,u={send_mail:"1",grcaptcha:null,page_flag:n,data:{full_name:t,state:null,city:null,subject:"".concat(o.chat_label||o.chat_desc),message:r,email_id:(i?l+",":"")+a,send_email_id:a,designation:null,organisation:null,mobile:null,telephone:null,dob:null,gender:null,address:null,checked_user:i,attachments:o.attachmentPath,user_email:l}};console.log(s,u)}},{key:"handleOnChange",value:function(e){var t=e.target,a=t.name;"attachment"===a?this.setState(Object(u.a)({},a,t.files[0])):this.setState(Object(u.a)({},a,t.value))}},{key:"render",value:function(){var e=this,t=this.state,a=t.toggleChat,n=t.chatList,l=t.contactUs,r=t.email,s=t.message,i=t.attachment,o=t.copyMe,u=this.props,m=u.icon,h=u.msg,d=u.title,p=u.currentTab;return c.a.createElement(O.a,{value:[]},c.a.createElement("div",{className:"ChatBoat ".concat("style"===p?"style col-12 col-md-9 col-sm-8":"")},c.a.createElement("button",{className:"btn btn-light chatHead",onClick:function(){return e.toggleChatBody(!a)}},c.a.createElement("img",{src:m,className:"img-fluid",alt:"Chat Head"}),h&&c.a.createElement("span",null,h)),(a||"style"===p)&&c.a.createElement(j,{currentTab:p,handleSubmit:function(t){return e.handleSubmit(t)},email:r,copyMe:o,attachment:i,message:s,contactUs:l,setContactUs:function(t){return e.setContactUs(t)},replay:function(t){return e.replay(t)},chatList:n,chatHeadTitle:d,chatHeadIcon:m,toggleChatBody:function(t){return e.toggleChatBody(t)},handleOnChange:function(t){return e.handleOnChange(t)}})))}}]),a}(c.a.Component),_=Object(O.b)(N),S=function(e){return c.a.createElement(O.a,{value:[]},c.a.createElement(_,e))},U=c.a.lazy((function(){return a.e(3).then(a.bind(null,28))})),L=function(e){var t=Object(n.useState)(!0),a=Object(o.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],m=i[1],h=Object(n.useState)(""),d=Object(o.a)(h,2),p=d[0],f=d[1];return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement(O.a,{value:[]},l?c.a.createElement(n.Suspense,{fallback:c.a.createElement("div",null,"Loading Editor...")},c.a.createElement(U,{setQuests:function(e){return f(e)},changeTab:m})):c.a.createElement("button",{className:"btn btn-link",onClick:r},"Load Editor")),c.a.createElement(S,Object.assign({chatList:p,currentTab:u},e))))},x=document.getElementById("ChatBoat");r.a.render(c.a.createElement(L,x.dataset),x),function(e){if("serviceWorker"in navigator){if(new URL("/chatboat-editor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/chatboat-editor","/service-worker.js");s?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):i(t,e)}))}}()},4:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var n=a(3),c=a(1),l=a(0),r=a.n(l),s=(a(25),Object(l.createContext)()),i=Object(l.createContext)();function o(e,t){switch(t.type){case"show":return{messages:[].concat(Object(c.a)(e.messages),[t.toast])};case"remove":var a=e.messages,n=a.filter((function(e){return e.timestamp===t.timestamp})),l=a.filter((function(e){return e.timestamp!==t.timestamp}));if(n.length){var r=n[0];clearTimeout(r.timer())}return{messages:Object(c.a)(l)};default:throw new Error("Unhandled action type: ".concat(t.type))}}function u(e){var t=e.children,a=Object(l.useReducer)(o,{messages:[]}),c=Object(n.a)(a,2),u=c[0],m=c[1];return r.a.createElement(s.Provider,{value:u},r.a.createElement(i.Provider,{value:m},t,r.a.createElement(h,null)))}function m(){var e=Object(l.useContext)(i);if(void 0===e)throw new Error("useToastDispatch must be used within a ToastProvider");return e}function h(e){var t=e.children;return r.a.createElement(s.Consumer,null,(function(e){if(void 0===e)throw new Error("ToastConsumer must be used within a ToastProvider");var a=e.messages;return r.a.createElement(i.Consumer,null,(function(e){return r.a.createElement(r.a.Fragment,null,t,a.length?r.a.createElement("div",{className:"toast-wrapper"},a.map((function(t){return r.a.createElement("div",{className:"alert alert-success my-2 px-3 py-2 toast border-0",role:"alert",key:"_"+Math.random()*t.timestamp},t.msg,r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-outline-light my-2 btn-sm",onClick:function(){return e({type:"remove",timestamp:t.timestamp})}},"\xd7"))}))):null)}))}))}function d(e){return function(t){var a=function(){var e=m();return function(t,a){if(t){var n=Date.now(),c=function(){return setTimeout((function(){e({type:"remove",timestamp:n})}),a||5e3)};e({type:"show",toast:{msg:t,timer:function(){return c()},timestamp:n}}),c()}}}();return r.a.createElement(e,Object.assign({},t,{showToast:a}))}}}},[[17,1,2]]]);