(this.webpackJsonpchatboat=this.webpackJsonpchatboat||[]).push([[3],{27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a(10),r=a(11),o=a(12),c=a(13),s=a(0),i=a.n(s),u=a(6),h=a(2),m=a(3),d=function(e){var t=e.questions,a=e.currentQuestion,n=e.handleSubmit,l=e.handleOnChange,r=e.handleAddEditChatOption,o=e.clearForm,c=e.deleteOption,u=Object(s.useState)(-1),h=Object(m.a)(u,2),d=h[0],p=h[1],f=function(e,t){e.stopPropagation(),d===t?(p(-1),c(t)):p(t)};return i.a.createElement("form",{onSubmit:function(e){return n(e,!1)}},i.a.createElement("h3",null,"Enter your chat details"),i.a.createElement("div",{className:"input-group"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("label",{className:"input-group-text"},"Chat ID#")),i.a.createElement("input",{type:"text",name:"chat_id",className:"form-control",value:a.chat_id,onChange:function(e){return l(e,!1)}})),i.a.createElement("div",{className:"form-group mt-3"},i.a.createElement("label",{htmlFor:"chatLabel",style:{fontWeight:"c"===a.type?900:400}},"c"===a.type?"Subject Line":"Chat Label"),i.a.createElement("textarea",{type:"text",className:"form-control",id:"chatLabel",name:"chat_label",value:a.chat_label,rows:"3",placeholder:"c"===a.type?"If your question type is contact us then enter your subject line here to show in contact us form":"",onChange:function(e){return l(e,!1)}})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"chatDesc"},"Chat Description"),i.a.createElement("textarea",{type:"text",className:"form-control",id:"chatDesc",name:"chat_desc",rows:"4",value:a.chat_desc,onChange:function(e){return l(e,!1)}})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"chatType"},"Chat Type"),i.a.createElement("select",{className:"form-control",id:"chatType",name:"type",value:a.type,onChange:function(e){return l(e,!1)}},i.a.createElement("option",{value:""},"Select Type"),i.a.createElement("option",{value:"q"},"Question"),i.a.createElement("option",{value:"ol"},"Options List"),i.a.createElement("option",{value:"a"},"Answer"),i.a.createElement("option",{value:"c"},"Contact us"),i.a.createElement("option",{value:"i"},"Info Message"))),i.a.createElement("div",{className:"form-group mb3"},i.a.createElement("label",{htmlFor:"replayId"},"Chat Options"),i.a.createElement("button",{type:"button",className:"btn btn-outline-info mb-1 w-100",onClick:function(){return r(a)}},"+ Add Chat Options"),a.chat_options.map((function(e,t){return i.a.createElement("button",{type:"button",className:"btn btn-outline-dark mb-1 w-100 d-flex align-items-center justify-content-between text-left",key:"ol_ques_"+t,onClick:function(){return r(e)}},i.a.createElement("span",null,e.chat_label&&i.a.createElement("p",{className:"m-0"},e.chat_label),e.chat_desc&&i.a.createElement("p",{className:"m-0"},i.a.createElement("small",null,e.chat_desc))),i.a.createElement("span",{className:"btn ".concat(d===e.chat_id?"btn-danger":"btn-outline-danger"," btn-sm"),onClick:function(t){return f(t,e.chat_id)}},d===e.chat_id?"Confirm Delete":"Delete"),d===e.chat_id&&i.a.createElement("span",{className:"btn btn-link btn-sm text-warning",onClick:function(e){return f(e,-1)}},"Cancel"))}))),"ol"!==a.type?i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"replayId"},"Chat Replay"),i.a.createElement("select",{className:"form-control",id:"replayId",name:"reply_id",onChange:function(e){return l(e,!1)},value:a.reply_id},i.a.createElement("option",{value:null,disabled:!0},"Select Chat Replay"),i.a.createElement("option",{value:""},"No Reply"),t.map((function(e,t){return i.a.createElement("option",{key:"opt_"+t,value:e.chat_id,disabled:e.chat_id===a.chat_id||e.reply_id===a.chat_id},"#"+e.chat_id," : ",e.chat_label||e.chat_desc)})))):null,i.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),i.a.createElement("button",{type:"button",className:"ml-3 btn btn-outline-primary",onClick:o},"Clear Form"))},p=function(e){var t=e.questions,a=e.chatOptionsQuestion,n=e.handleSubmit,l=e.handleOnChange,r=e.currentQuestion,o=e.handleBack;return i.a.createElement("form",{onSubmit:function(e){return n(e,!0)}},i.a.createElement("div",{className:"action-bar d-flex align-items-center mb-3"},i.a.createElement("button",{type:"button",className:"btn btn-outline-dark",onClick:o},"Back"),i.a.createElement("h5",{className:"m-0 ml-2"},"Adding Chat options for Chat ID# ",r.chat_id)),i.a.createElement("div",{className:"input-group"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("label",{className:"input-group-text"},"Chat ID#")),i.a.createElement("input",{type:"text",className:"form-control",name:"chat_id",value:a.chat_id,onChange:function(e){return l(e,!0)}})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"chatLabel"},"Chat Label"),i.a.createElement("textarea",{type:"text",className:"form-control",id:"chatLabel",name:"chat_label",value:a.chat_label,rows:"3",onChange:function(e){return l(e,!0)}})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"chatDesc"},"Chat Description"),i.a.createElement("textarea",{type:"text",className:"form-control",id:"chatDesc",name:"chat_desc",rows:"4",value:a.chat_desc,onChange:function(e){return l(e,!0)}})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"chatType"},"Chat Type"),i.a.createElement("select",{className:"form-control",id:"chatType",name:"type",value:a.type,onChange:function(e){return l(e,!0)}},i.a.createElement("option",{value:""},"Select Type"),i.a.createElement("option",{value:"q"},"Question"),i.a.createElement("option",{value:"a"},"Answer"),i.a.createElement("option",{value:"c"},"Contact us"),i.a.createElement("option",{value:"i"},"Info Message"))),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"replayId"},"Chat Replay"),i.a.createElement("select",{className:"form-control",id:"replayId",name:"reply_id",onChange:function(e){return l(e,!0)},value:a.reply_id+""},i.a.createElement("option",{value:null,disabled:!0},"Select Chat Replay"),i.a.createElement("option",{value:""},"No Reply"),t.map((function(e,t){return i.a.createElement("option",{key:"opt_"+t,value:e.chat_id,disabled:e.reply_id===r.chat_id},"#"+e.chat_id," : ",e.chat_label||e.chat_desc)})))),i.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))},f=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).deleteOption=function(e){var t=Object(h.a)({},n.state.currentQuestion),a=t.chat_options.filter((function(t){return t.chat_id!==e}));t.chat_options=a,n.setState({currentQuestion:t})};var r=e.questions,o=e.editQuestion,c={chat_id:r&&r.length||0,chat_label:"",chat_desc:"",chat_options:[],type:"",reply_id:""},s=!1;o&&(c.chat_id=o.chat_id,c.chat_label=o.chat_label,c.chat_desc=o.chat_desc,c.chat_options=o.chat_options,c.type=o.type,c.reply_id=o.reply_id,s=!0);var i=Object(h.a)({},c);return n.state={questions:r||[],currentQuestion:c,chatOptionsQuestion:i,ifEditing:s,errors:{}},n}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.editQuestion,a=e.questions,n=this.state,l=n.currentQuestion,r=n.questions;t&&l.chat_id!==t.chat_id&&(l.chat_id=t.chat_id,l.chat_label=t.chat_label,l.chat_desc=t.chat_desc,l.chat_options=t.chat_options,l.type=t.type,l.reply_id=t.reply_id||"",this.setState({currentQuestion:l,ifEditing:!0,questions:a}),this.handleBack()),r.length!==a.length&&(l.chat_id=a.length,this.setState({questions:a,currentQuestion:l}))}},{key:"handleOnChange",value:function(e,t){var a=this.state[t?"chatOptionsQuestion":"currentQuestion"];a[e.target.name]=e.target.value,this.setState(Object(u.a)({},t?"chatOptionsQuestion":"currentQuestion",a))}},{key:"handleSubmit",value:function(e,t){var a=this;e.preventDefault();var l=this.state,r=l.chatOptionsQuestion,o=l.currentQuestion;if(t){var c=Object(h.a)({},r);c.reply_id=parseInt(c.reply_id);var s=Object(h.a)({},o);s.reply_id&&(s.reply_id=parseInt(s.reply_id)),s.chat_options.filter((function(e){return e.chat_id===r.chat_id})).length?s.chat_options=s.chat_options.map((function(e){return e.chat_id=parseInt(e.chat_id),e.reply_id=parseInt(e.reply_id),console.log(e.chat_id),e.chat_id===r.chat_id?r:e})):(s.chat_options=[].concat(Object(n.a)(s.chat_options),[c]),s.chat_options.forEach((function(e){e.chat_id=parseInt(e.chat_id),e.reply_id=parseInt(e.reply_id)}))),s.type="ol",s.reply_id="",this.setState({currentQuestion:s},(function(){return a.handleBack()}))}else o.chat_label||o.chat_desc?(this.props.saveQuestions(o),this.clearForm(o)):this.showError("Please add chat label or description")}},{key:"showError",value:function(e){var t=this;this.setState({errors:{0:e}},(function(){setTimeout((function(){t.setState({errors:{}})}),5e3)}))}},{key:"clearForm",value:function(){this.props.saveQuestions(null),this.setState({ifEditing:!1,currentQuestion:{chat_id:this.state.questions.length,chat_label:"",chat_desc:"",chat_options:[],type:"",reply_id:""}})}},{key:"handleAddEditChatOption",value:function(e){if(console.log(e),e){var t=this.state.currentQuestion.chat_options.filter((function(t){return t.chat_id===e.chat_id}));if(t.length)this.setState({chatOptionsQuestion:t[0],ifEditing:!0});else{var a=100*e.chat_id+e.chat_options.length,n=this.state.chatOptionsQuestion;console.log(n),n.chat_id=a,this.setState({chatOptionsQuestion:n,ifEditing:!0})}}}},{key:"handleBack",value:function(){var e=Object(h.a)({},this.state.chatOptionsQuestion);e.chat_desc="",e.chat_id=0,e.chat_label="",e.chat_options=[],e.reply_id="",e.type="",this.setState({chatOptionsQuestion:e,ifEditing:!1})}},{key:"changeTab",value:function(e){this.props.changeTab(e)}},{key:"getCurrentTabView",value:function(e,t,a,n,l,r,o,c){var s=this;switch(e){case"json":return i.a.createElement("div",{className:"form-group"},i.a.createElement("h3",{htmlFor:"jsonField"},"If you already have json paste here"),i.a.createElement("textarea",{className:"form-control",rows:"20",id:"jsonField",value:o,placeholder:"Paste your json here...",onChange:c}));case"style":return i.a.createElement("div",{className:"h4"},"Coming Soon.");case"form":return i.a.createElement(i.a.Fragment,null,n.chat_id>-1&&l?i.a.createElement(p,{questions:t,currentQuestion:a,chatOptionsQuestion:n,handleOnChange:function(e,t){return s.handleOnChange(e,t)},handleBack:function(){return s.handleBack()},handleSubmit:function(e,t){return s.handleSubmit(e,t)}}):i.a.createElement(d,{clearForm:function(){return s.clearForm()},handleAddEditChatOption:function(e){return s.handleAddEditChatOption(e)},deleteOption:this.deleteOption,questions:t,currentQuestion:a,handleOnChange:function(e,t){return s.handleOnChange(e,t)},handleSubmit:function(e,t){return s.handleSubmit(e,t)}}),Object.keys(r).length?i.a.createElement("div",{className:"my-3"},i.a.createElement("h5",null,"Errors:"),Object.keys(r).map((function(e){return i.a.createElement("div",{className:"alert alert-danger fade-scale-up",role:"alert",key:"err_"+e},r[e])}))):null);default:return null}}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.currentQuestion,l=t.chatOptionsQuestion,r=t.ifEditing,o=t.errors,c=this.props,s=c.currentTab,u=c.jsonValue,h=c.handleJSONchange;return i.a.createElement("div",{className:"sidebar col-12 col-md-3 col-sm-4"},i.a.createElement("div",{className:"btn-group w-100 mb-3"},i.a.createElement("button",{onClick:function(){return e.changeTab("json")},className:"btn ".concat("json"===s?" btn-primary":"btn-outline-primary")},"Paste JSON"),i.a.createElement("button",{onClick:function(){return e.changeTab("form")},className:"btn ".concat("form"===s?" btn-primary":"btn-outline-primary")},"Create/Edit"),i.a.createElement("button",{onClick:function(){return e.changeTab("style")},className:"btn ".concat("style"===s?" btn-primary":"btn-outline-primary")},"Style Bot")),this.getCurrentTabView(s,a,n,l,r,o,u,h),i.a.createElement("div",{className:"col col-12"},i.a.createElement("p",null,"Instructions"),i.a.createElement("ol",null,i.a.createElement("li",null,"Add all questions, then one by one link them with reply dropdown"),i.a.createElement("li",null,"Use chat type 'info message' to show in between info messages, don\u2019t forget to link to next questions after info message has been displayed"),i.a.createElement("li",null,"If your question has sub-questions or multiple options, select chat type 'Options List'"),i.a.createElement("li",null,"Option list question's chat type will be 'contact us', so that user can contact for the particular questions query"),i.a.createElement("li",null,"Use Chat module to preview your questions"))))}}]),a}(i.a.Component),b=function(e){var t=e.questions,a=e.setEditQuestion,n=e.downloadJSON,l=e.searchText,r=e.handleSearch,o=e.deleteQuestion,c=Object(s.useState)(-1),u=Object(m.a)(c,2),h=u[0],d=u[1],p=Object(s.useState)(!1),f=Object(m.a)(p,1)[0],b=[];if(l){var y=l.toLowerCase();b=t.filter((function(e){return e.chat_id.toString().toLowerCase().includes(y)||e.chat_label.toLowerCase().includes(y)||e.chat_desc.toLowerCase().includes(y)||e.reply_id&&e.reply_id.toString().toLowerCase().includes(y)}))}else b=t;var _=function(e,t){e.stopPropagation(),h===t?(d(-1),o(t)):d(t)};return i.a.createElement("div",{className:"questions col-12 col-md-9 col-sm-8"},i.a.createElement("div",{className:"action-bar d-flex align-items-center justify-content-between"},i.a.createElement("h5",{className:"m-0 ml-2"},"Chat boat Questions"),i.a.createElement("div",{className:"d-flex align-items-center justify-content-between my-1"},i.a.createElement("button",{className:"btn btn-primary mx-2",onClick:n},"Download JSON"),i.a.createElement("div",{className:"input-group px-0",style:{flex:1}},i.a.createElement("input",{type:"text",className:"form-control",value:l,placeholder:"Search here",onChange:function(e){return r(e.target.value)}}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return r("")}},"Clear"))))),f&&i.a.createElement("button",{className:"btn btn-outline-light"},"Top"),i.a.createElement("div",{className:"container-fluid py-3"},i.a.createElement("div",{className:"row"},b&&b.length?b.map((function(e,t){return i.a.createElement("div",{className:"col col-12 col-md-4 col-sm-6 mb-2",key:"ques_"+t},i.a.createElement("div",{className:"card",onClick:function(){return a(e)}},i.a.createElement("div",{className:"card-body"},i.a.createElement("h6",{className:"card-text d-flex align-items-center justify-content-between"},i.a.createElement("span",null,"Chat ID# ",i.a.createElement("strong",null,e.chat_id)),e.reply_id&&i.a.createElement("span",null,"Reply Id# ",e.reply_id)),i.a.createElement("hr",null),i.a.createElement("h5",{className:"card-title"},e.chat_label),i.a.createElement("p",{className:"card-text"},e.chat_desc),i.a.createElement("button",{className:"btn ".concat(h===e.chat_id?"btn-danger":"btn-outline-danger"," btn-sm"),onClick:function(t){return _(t,e.chat_id)}},h===e.chat_id?"Confirm Delete":"Delete"),h===e.chat_id&&i.a.createElement("button",{className:"btn btn-outline-light' btn-sm",onClick:function(e){return _(e,-1)}},"Cancel"))))})):i.a.createElement("div",{className:"alert alert-info fade-scale-up",role:"alert"},"No questions added yet"))))},y=a(4),_=(a(27),function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={questions:[],editQuestion:null,jsonValue:"",searchText:"",currentTab:"form"},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("questions"),t=localStorage.getItem("jsonValue"),a=this.props.setQuests,n=null;if(e)try{n=JSON.parse(e)}catch(l){console.log(l)}n&&t?(this.setState({questions:n,jsonValue:t}),a(n)):n?(this.setState({questions:n}),a(n)):t&&this.setState({jsonValue:t})}},{key:"setEditQuestion",value:function(e){e&&this.setState({editQuestion:e})}},{key:"handleSaveQuestion",value:function(e){if(e){var t=this.state.questions;e.chat_id=parseInt(e.chat_id),e.reply_id&&(e.reply_id=parseInt(e.reply_id));var a=[];a=t.filter((function(t){return t.chat_id===e.chat_id})).length?t.map((function(t){return t.chat_id===e.chat_id?e:t})):[].concat(Object(n.a)(t),[e]),this.saveQuestions(a)}else this.setState({editQuestion:null})}},{key:"saveQuestions",value:function(e){this.setState({questions:e,editQuestion:null,jsonValue:JSON.stringify(e)}),localStorage.setItem("questions",JSON.stringify(e)),this.showError("Questions updated successfully"),this.props.setQuests(e)}},{key:"showError",value:function(e,t){(0,this.props.showToast)(e,t)}},{key:"downloadJSON",value:function(){!function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("questions.json",JSON.stringify(this.state.questions)),localStorage.setItem("questions",JSON.stringify(this.state.questions))}},{key:"handleJSONchange",value:function(e){var t=this,a=e.target.value;try{var n=JSON.parse(a);console.log(n),n&&n.length>-1&&(n.filter((function(e){return!!(e.hasOwnProperty("chat_id")&&e.hasOwnProperty("chat_label")&&e.hasOwnProperty("chat_options")&&e.hasOwnProperty("type")&&e.hasOwnProperty("reply_id")&&e.hasOwnProperty("chat_desc"))||(t.showError("Following field has missing keys\n"+JSON.stringify(e),2e4),!1)})),localStorage.setItem("jsonValue",a),localStorage.setItem("questions",JSON.stringify(n)),this.setState({jsonValue:a,questions:n}),this.props.setQuests(n))}catch(l){console.log(l),this.setState({jsonValue:a}),""!==a&&this.showError("Invalid json format",1e5)}}},{key:"handleSearch",value:function(e){this.setState({searchText:e})}},{key:"deleteQuestion",value:function(e){var t=this.state.questions.filter((function(t){return t.chat_id!==e}));this.saveQuestions(t)}},{key:"changeTab",value:function(e){this.props.changeTab(e),this.setState({currentTab:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.editQuestion,l=t.jsonValue,r=t.searchText,o=t.currentTab;return i.a.createElement("div",{className:"Editor container-fluid"},i.a.createElement("div",{className:"row"},i.a.createElement(f,{currentTab:o,changeTab:function(t){return e.changeTab(t)},jsonValue:l,handleJSONchange:function(t){return e.handleJSONchange(t)},questions:a,editQuestion:n,saveQuestions:function(t){return e.handleSaveQuestion(t)}}),"form"===o&&i.a.createElement(b,{searchText:r,handleSearch:function(t){return e.handleSearch(t)},downloadJSON:function(){return e.downloadJSON()},questions:a,editQuestion:n,setEditQuestion:function(t){return e.setEditQuestion(t)},deleteQuestion:function(t){return e.deleteQuestion(t)}})))}}]),a}(i.a.Component));t.default=Object(y.b)(_)}}]);